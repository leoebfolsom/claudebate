{
  "project": "claudebate",
  "branchName": "ralph/html-export-improvements",
  "description": "Improve HTML export to properly render markdown formatting",
  "userStories": [
    {
      "id": "US-001",
      "title": "Add convert_code_blocks function",
      "description": "Create function to convert markdown code blocks to styled pre/code HTML tags.",
      "acceptanceCriteria": [
        "Add convert_code_blocks() function to export_functions.sh",
        "Use AWK state machine to track in_code_block state",
        "Convert ```lang to <pre><code class=\"language-lang\">",
        "HTML-escape content inside code blocks (& < >)",
        "Handle unclosed code blocks gracefully"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Add convert_headers function",
      "description": "Create function to convert markdown headers to HTML h1-h6 tags.",
      "acceptanceCriteria": [
        "Add convert_headers() function to export_functions.sh",
        "Use sed -E for extended regex (macOS compatible)",
        "Convert # through ###### to h1 through h6",
        "Process from longest pattern to shortest to avoid partial matches"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Add convert_inline_formatting function",
      "description": "Create function to convert bold/italic markdown to HTML strong/em tags.",
      "acceptanceCriteria": [
        "Add convert_inline_formatting() function to export_functions.sh",
        "Skip lines that are already HTML tags (pre, code, h1-h6)",
        "HTML-escape non-tag lines before converting",
        "Convert **text** and __text__ to <strong>",
        "Convert *text* and _text_ to <em>"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Add CSS styling for new elements",
      "description": "Add CSS styles for code blocks, headers, and inline formatting.",
      "acceptanceCriteria": [
        "Add pre/code styling: dark background, monospace font, padding, border-radius",
        "Add header styling: appropriate margins and colors",
        "Add strong/em styling if needed",
        "Styles should match existing design aesthetic"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Integrate conversion pipeline into export_to_html",
      "description": "Modify export_to_html to use the new conversion functions.",
      "acceptanceCriteria": [
        "Create process_markdown_content() that composes the conversion functions",
        "Pipe content through: convert_code_blocks | convert_headers | convert_inline_formatting",
        "Modify export_to_html to use the pipeline for debate content",
        "Preserve existing section structure (session-a, session-b, verdict classes)"
      ],
      "priority": 5,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Test and verify HTML export",
      "description": "Test the improved HTML export with existing transcripts.",
      "acceptanceCriteria": [
        "Export an existing transcript with code blocks and headers",
        "Verify code blocks render with proper styling",
        "Verify headers render as h1-h6 tags",
        "Verify bold/italic render as strong/em",
        "Open in browser to visually confirm improvements"
      ],
      "priority": 6,
      "passes": true,
      "notes": "Known issue: underscores in filenames (e.g. code_debate_2026...) are converted to <em> tags. This is an edge case that could be improved in a future iteration by requiring word boundaries for underscore-based italic."
    }
  ]
}
